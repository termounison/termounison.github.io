<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios de Conversión de Unidades</title>
    <style>
        body {
            font-family: Verdana, sans-serif;
            display: flex;
            justify-content: center;
            flex-direction: column;
            background-color: #f0f0f0;
            margin: 0;
            padding-bottom: 70px;
        }
        .container {
            text-align: center;
            background: #fff;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            margin: 20px auto;
        }
        .menu-item, .btn {
            display: block;
            width: 100%;
            margin: 15px auto;
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            text-align: center;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        .menu-item:hover, .btn:hover {
            background-color: #0056b3;
        }
        #ejercicio-container {
            display: none;
        }
        .ejercicio-titulo {
            font-size: 24px;
            margin-bottom: 20px;
        }
        .pregunta-texto {
            font-size: 20px;
            margin-bottom: 10px;
        }
        .respuesta-texto {
            font-weight: bold;
            font-size: 20px;
            margin-top: 5px;
            margin-bottom: 25px;
            color: #0000ff;
        }
        .buttons-container {
            margin-top: 20px;
        }
        .footer-text {
            width: 100%;
            background-color: #f0f0f0;
            color: #666;
            text-align: center;
            padding: 8px 0;
            font-size: 12px;
        }
    </style>
</head>
<body>

<div class="container">
    <div id="menu-container">
        <h1>Conversión de Unidades</h1>
        <div class="menu-section">
            <button class="menu-item" onclick="iniciarEjercicio('temperatura')">Temperatura</button>
            <button class="menu-item" onclick="iniciarEjercicio('presion')">Presión</button>
            <button class="menu-item" onclick="iniciarEjercicio('energia')">Energía</button>
            <button class="menu-item" onclick="iniciarEjercicio('cantidad')">Cantidad de sustancia</button>
            <button class="menu-item" onclick="iniciarEjercicio('todo')">Todos</button>
			<button class="menu-item" onclick="window.history.back()">Regresar</button>
        </div>
    </div>

    <div id="ejercicio-container">
        <h2 class="ejercicio-titulo"></h2>
        <div class="pregunta-texto"></div>
        <div class="respuesta-texto"></div>
        <div id="main-buttons" class="buttons-container">
            <button class="btn" onclick="mostrarRespuesta()">Mostrar Respuesta</button>
            <button class="btn" onclick="mostrarSiguienteEjercicio()">Siguiente Ejercicio</button>
            <button class="btn" onclick="mostrarFactores()">Factores de conversión</button>
            <button class="btn" onclick="volverAlMenu()">Regresar</button>
        </div>
        <div id="volver-button-container" class="buttons-container" style="display: none;">
            <button class="btn" onclick="volverAlEjercicio()">Regresar</button>
        </div>
    </div>
</div>

<div class="footer-text">
    <h4>&#169; 2024, 2025 Dr. Octavio Juárez</h4>
    <h5>octavio.juarez@unison.mx</h5>
</div>

<script>
    const CONV_C_A_K = 273.15;
    const CONV_PA_A_ATM = 101325;
    const CONV_MMHG_A_PA = 133.322;
    const R_L_ATM = 0.08206;
    const R_J = 8.314;
    const CONV_J_A_CAL = 0.239;

    const SUSTANCIAS = [
        { nombre: 'Agua', formula: 'H<sub>2</sub>O', MM: 18.02 },
        { nombre: 'Hidrógeno', formula: 'H<sub>2</sub>', MM: 2.02 },
        { nombre: 'Oxígeno', formula: 'O<sub>2</sub>', MM: 32.00 },
        { nombre: 'Nitrógeno', formula: 'N<sub>2</sub>', MM: 28.01 },
        { nombre: 'Metano', formula: 'CH<sub>4</sub>', MM: 16.04 }
    ];

    let tipoActual = '';
    const ejercicios = {
        'temperatura': {
            units: [
                { unit: '°C', name: 'Celsius', to: { K: (v) => v + 273.15, '°F': (v) => v * 9/5 + 32 } },
                { unit: 'K', name: 'Kelvin', to: { '°C': (v) => v - 273.15, '°F': (v) => (v - 273.15) * 9/5 + 32 } },
                { unit: '°F', name: 'Fahrenheit', to: { '°C': (v) => (v - 32) * 5/9, K: (v) => (v - 32) * 5/9 + 273.15 } }
            ],
            title: "Temperatura"
        },
        'presion': {
            units: [
                { unit: 'Pa', name: 'Pascal', factor: 1 },
                { unit: 'atm', name: 'atmósfera', factor: 101325 },
                { unit: 'mmHg', name: 'milímetro de mercurio', factor: 133.322 }
            ],
            title: "Presión"
        },
        'energia': {
            units: [
                { unit: 'J', name: 'julio', factor: 1 },
                { unit: 'cal', name: 'caloría', factor: 4.184 },
                { unit: 'atm·L', name: 'atmósfera-litro', factor: 101.325 }
            ],
            title: "Energía"
        },
        'cantidad': {
            units: [
                { unit: 'g', name: 'gramo' },
                { unit: 'mol', name: 'mol' }
            ],
            title: "Cantidad de Sustancia"
        }
    };
    
    function generarFuncionesDeConversion() {
        for (const categoria in ejercicios) {
            const cat = ejercicios[categoria];
            switch (categoria) {
                case 'temperatura':
                    const tempUnits = cat.units;
                    for (let i = 0; i < tempUnits.length; i++) {
                        const unitA = tempUnits[i];
                        for (const unitBKey in unitA.to) {
                            const key = `${unitA.unit.replace(/°/g, '')}_a_${unitBKey.replace(/°/g, '')}`;
                            cat[key] = () => {
                                const valor = Math.floor(Math.random() * 100) + 20;
                                const valorConvertido = unitA.to[unitBKey](valor);
                                const pregunta = `Convierte ${valor.toFixed(2)} ${unitA.unit} en ${unitBKey}`;
                                const respuesta = `${valorConvertido.toFixed(2)} ${unitBKey}`;
                                return { titulo: cat.title, pregunta: pregunta, respuesta: respuesta };
                            };
                        }
                    }
                    break;
                case 'cantidad':
                    cat['gramo_a_mol'] = () => {
                        const sustancia = SUSTANCIAS[Math.floor(Math.random() * SUSTANCIAS.length)];
                        const masa_g = Math.floor(Math.random() * 200) + 50;
                        const moles = masa_g / sustancia.MM;
                        const pregunta = `Convierte ${masa_g} g de ${sustancia.formula} (${sustancia.MM.toFixed(2)} g/mol) en moles.`;
                        const respuesta = `${moles.toFixed(3)} mol`;
                        return { titulo: "Cantidad de Sustancia", pregunta: pregunta, respuesta: respuesta };
                    };
                    cat['mol_a_gramo'] = () => {
                        const moles = (Math.random() * 5) + 1;
                        const sustancia = SUSTANCIAS[Math.floor(Math.random() * SUSTANCIAS.length)];
                        const masa_g = moles * sustancia.MM;
                        const pregunta = `Convierte ${moles.toFixed(2)} mol de ${sustancia.formula} (${sustancia.MM.toFixed(2)} g/mol) en gramos.`;
                        const respuesta = `${masa_g.toFixed(2)} g`;
                        return { titulo: "Cantidad de Sustancia", pregunta: pregunta, respuesta: respuesta };
                    };
                    break;
                default: // presión, energía, etc.
                    const unitArray = cat.units;
                    for (let i = 0; i < unitArray.length; i++) {
                        for (let j = 0; j < unitArray.length; j++) {
                            if (i !== j) {
                                const unitA = unitArray[i];
                                const unitB = unitArray[j];
                                const key = `${unitA.unit.replace(/·/g, '')}_a_${unitB.unit.replace(/·/g, '')}`;
                                cat[key] = () => {
                                    const valor = Math.random() * 100 + 1;
                                    const valorConvertido = (valor * unitA.factor / unitB.factor);
                                    const pregunta = `Convierte ${valor.toFixed(2)} ${unitA.unit} en ${unitB.unit}`;
                                    const respuesta = `${valorConvertido.toFixed(2)} ${unitB.unit}`;
                                    return { titulo: cat.title, pregunta: pregunta, respuesta: respuesta };
                                };
                            }
                        }
                    }
                    break;
            }
        }
    }
    
    generarFuncionesDeConversion();

    window.iniciarEjercicio = (tipo) => {
        tipoActual = tipo;
        document.getElementById('menu-container').style.display = 'none';
        document.getElementById('ejercicio-container').style.display = 'block';
        mostrarSiguienteEjercicio();
    };

    window.mostrarSiguienteEjercicio = () => {
        let ejercicio;
        if (tipoActual === 'todo') {
            const categorias = Object.keys(ejercicios);
            const categoriaAleatoria = categorias[Math.floor(Math.random() * categorias.length)];
            const tiposDeEjercicios = Object.keys(ejercicios[categoriaAleatoria]).filter(key => typeof ejercicios[categoriaAleatoria][key] === 'function');
            const tipoDeEjercicio = tiposDeEjercicios[Math.floor(Math.random() * tiposDeEjercicios.length)];
            ejercicio = ejercicios[categoriaAleatoria][tipoDeEjercicio]();
        } else {
            const tiposDeEjercicios = Object.keys(ejercicios[tipoActual]).filter(key => typeof ejercicios[tipoActual][key] === 'function');
            const tipoDeEjercicio = tiposDeEjercicios[Math.floor(Math.random() * tiposDeEjercicios.length)];
            ejercicio = ejercicios[tipoActual][tipoDeEjercicio]();
        }
        
        document.querySelector('#ejercicio-container .ejercicio-titulo').innerText = ejercicio.titulo;
        document.querySelector('#ejercicio-container .pregunta-texto').innerHTML = ejercicio.pregunta;
        document.querySelector('#ejercicio-container .respuesta-texto').innerHTML = "Respuesta: " + ejercicio.respuesta;
        document.querySelector('#ejercicio-container .respuesta-texto').style.visibility = 'hidden';
    };

    window.mostrarRespuesta = () => {
        document.querySelector('#ejercicio-container .respuesta-texto').style.visibility = 'visible';
    };

    window.mostrarFactores = () => {
        document.getElementById('main-buttons').style.display = 'none';
        document.getElementById('volver-button-container').style.display = 'block';

        const categoria = ejercicios[tipoActual];
        if (!categoria || !categoria.units) {
            document.querySelector('#ejercicio-container .pregunta-texto').innerHTML = '<p>Aquí no están.</p>';
            document.querySelector('#ejercicio-container .ejercicio-titulo').innerHTML = 'Factores de Conversión';
            document.querySelector('#ejercicio-container .respuesta-texto').style.visibility = 'hidden';
            return;
        }

        let contenidoHTML = `<h2 class="ejercicio-titulo"></h2><div style="text-align: left; margin-top: 20px;">`;

        if (tipoActual === 'temperatura') {
            contenidoHTML += `<p></p>

            <p>T<sub>K</sub> = T<sub>C</sub> + 273.15</p>
            <p>T<sub>F</sub> = (T<sub>C</sub> × 9/5) + 32</p>
            <p>T<sub>C</sub> = (T<sub>F</sub> - 32) × 5/9</p>
            <p>T<sub>K</sub> = (T<sub>F</sub> - 32) × 5/9 + 273.15</p>
            <p>T<sub>C</sub> = T<sub>K</sub> - 273.15</p>
            <p>T<sub>F</sub> = (T<sub>K</sub> - 273.15) × 9/5 + 32</p>`;
        } else if (tipoActual === 'cantidad') {
            contenidoHTML += `<p></p>
            <div style="font-size: 20px;  margin: 20px 0;">
                <p>n = m / M</p>
            </div>
            <p>Donde:</p>
            <ul style="list-style-type: none; padding-left: 0;">
                <li>n: es el número de moles (mol)</li>
                <li>m: es la masa de la sustancia (g)</li>
                <li>M: es la masa molar (g/mol)</li>
            </ul>`;
        } else {
            const units = categoria.units;
            units.forEach(unitA => {
                units.forEach(unitB => {
                    if (unitA.unit !== unitB.unit) {
                        const factor = unitA.factor / unitB.factor;
                        let factorFormateado;
                        if (factor >= 0.001 && factor <= 1000) {
                            factorFormateado = factor.toFixed(6);
                        } else {
                            factorFormateado = factor.toExponential(6);
                        }
                        contenidoHTML += `<p>1 ${unitA.unit} = ${factorFormateado} ${unitB.unit}</p>`;
                    }
                });
            });
        }
        
        contenidoHTML += `</div>`;

        document.querySelector('#ejercicio-container .pregunta-texto').innerHTML = contenidoHTML;
        document.querySelector('#ejercicio-container .respuesta-texto').style.visibility = 'hidden';
    };

    window.volverAlEjercicio = () => {
        document.getElementById('main-buttons').style.display = 'block';
        document.getElementById('volver-button-container').style.display = 'none';
        mostrarSiguienteEjercicio();
    };

    window.volverAlMenu = () => {
        document.getElementById('menu-container').style.display = 'block';
        document.getElementById('ejercicio-container').style.display = 'none';
    };
</script>

</body>
</html>